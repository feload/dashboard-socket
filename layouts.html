<!doctype html>
<html>
  <head>
    <title>Layouts socket.</title>
    <script src="http://localhost:8181/socket.io/socket.io.js"></script>
    <script>
      var app_id = "layouts";
      var version = 'v1.0.0';
      var username = "user".concat(Math.round(Math.random() * 1000).toString());
      //var messaging = io("http://localhost:8181/messages");
      var state = io.connect("http://localhost:8181/state");
    </script>
  </head>
  <body>
    <h1>Layouts</h1>
    <script>
      state.on('connect', () => {
        console.log(app_id + ' ' + version + ' online.');
        state.emit('user_online', { app_id, username });
      });
      state.on('ask', (msg) => {
        console.log(`OMG! somebody's asking for ${msg}`);
        state.emit('answer', { app_id, version })
      });
    </script>
  </body>
</html>
